<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<title>NOVAM-Viewer</title>

	<link rel="icon" type="image/png" href="site-icon.png">

	<link rel="stylesheet" href="base.css" type="text/css">
	<link rel="stylesheet" href="viewer-layout.css" type="text/css">

	<script src="scripts/prototype.js" type="text/javascript"></script>
	<script src="scripts/OpenLayers.js" type="text/javascript"></script>
	<script src="scripts/OpenStreetMap.js" type="text/javascript"></script>
	<script src="scripts/NaptanMerger.js" type="text/javascript"></script>
	<script type="text/javascript">

		var mapControl = null;
		var stopViewer = null;

		var currentStop = null;

		runApp(function () {
			var stopPanel = new NaptanMerger.WidgetContainer('stopPanel');

			mapControl = new NaptanMerger.MapControl('map');
			stopViewer = new NaptanMerger.StopViewer();
			
			stopPanel.embedWidget(stopViewer);

			mapControl.events.register("stop_click", this, function (evt) {
				if (currentStop) {
					mapControl.unselectFeature(currentStop);
				}

				mapControl.selectFeature(evt.feature);
				stopViewer.setStop(evt.feature);
				currentStop = evt.feature;
			});

			mapControl.events.register("stop_mouseover", this, function(evt) {
				mapControl.highlightFeature(evt.feature);
				stopViewer.setStop(evt.feature);
			});

			mapControl.events.register("stop_mouseout", this, function(evt) {
				mapControl.unhighlightFeature(evt.feature);
				stopViewer.setStop(currentStop);
			});
		});

	</script>
</head>

<body>
	<h1><img src="logo.png" alt="NOVAM-Logo">NOVAM-Viewer</h1>
	<ul id="tools_menu">
		<li><a href="">Help</a></li>
	</ul>
	<div id="map"></div>
	<div id="stopPanel"></div>
	<div id="mapKey">
		<h2>Map Key</h2>
		<dl>
			<dt><img src="finished_stop.png" alt="Green bus stop marker"></dt>
			<dd>Merged and completely tagged bus stop</dd>
			<dt><img src="merged_stop.png" alt="Orange bus stop marker"></dt>
			<dd>Merged bus stop which still lacks some tags</dd>
			<dt><img src="no_physical_stop.png" alt="Grey bus stop marker"></dt>
			<dd>Bus stop which is not marked on the ground</dd>
			<dt><img src="plain_naptan_stop.png" alt="Blue bus stop marker"></dt>
			<dd>Bus stop which was imported from NaPTAN and which has not been verified yet</dd>
			<dt><img src="plain_osm_stop.png" alt="Yellow bus stop marker"></dt>
			<dd>Bus stop in OpenStreetMap which has not yet been merged with NaPTAN data</dd>
		</dl>
	</div>
</body>
</html>
